<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>D&D Combat Arena</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
  </head>
  <body>
    <header>
      <div class="sigil" aria-hidden="true">⚔️</div>
      <h1>D&amp;D Combat Arena</h1>
      <p class="tagline">Summon a hero, confront a monster, and let the d20 decide destiny.</p>
    </header>

    <main>
      <section class="creation-panel">
        <h2>Forge a Custom Hero</h2>
        <form id="character-form">
          <div class="form-row">
            <label for="character-name">Hero Name
              <input id="character-name" type="text" placeholder="Arannis the Bold" required />
            </label>
            <label for="character-class">Class
              <select id="character-class" required></select>
            </label>
            <label for="ability-method">Ability Method
              <select id="ability-method">
                <option value="4d6-drop-lowest">4d6 Drop Lowest</option>
                <option value="3d6">3d6 Classic</option>
                <option value="2d6+6">2d6 + 6 Heroic</option>
                <option value="point-buy">Point Buy</option>
              </select>
            </label>
            <button type="button" id="roll-ability-scores" class="secondary">Generate Scores</button>
          </div>

          <div class="ability-grid">
            <label for="ability-strength">Strength
              <input id="ability-strength" type="number" min="3" max="20" value="15" />
            </label>
            <label for="ability-dexterity">Dexterity
              <input id="ability-dexterity" type="number" min="3" max="20" value="14" />
            </label>
            <label for="ability-constitution">Constitution
              <input id="ability-constitution" type="number" min="3" max="20" value="13" />
            </label>
            <label for="ability-intelligence">Intelligence
              <input id="ability-intelligence" type="number" min="3" max="20" value="12" />
            </label>
            <label for="ability-wisdom">Wisdom
              <input id="ability-wisdom" type="number" min="3" max="20" value="10" />
            </label>
            <label for="ability-charisma">Charisma
              <input id="ability-charisma" type="number" min="3" max="20" value="8" />
            </label>
          </div>

          <div class="skills-container">
            <div class="skills-header">
              <h3>Skills</h3>
              <span>Choose <span id="skill-limit">0</span></span>
            </div>
            <div id="skill-options" class="option-grid"></div>
          </div>

          <div class="equipment-container">
            <h3>Starting Equipment</h3>
            <div class="equipment-selectors">
              <label for="weapon-choice">Weapon
                <select id="weapon-choice"></select>
              </label>
              <label for="armor-choice">Armor
                <select id="armor-choice"></select>
              </label>
              <label for="pack-choice">Pack
                <select id="pack-choice"></select>
              </label>
            </div>
          </div>

          <div id="spell-container" class="spell-container hidden">
            <h3>Spell Preparation</h3>
            <p id="spell-helper" class="muted-note"></p>
            <div>
              <h4>Cantrips</h4>
              <div id="cantrip-options" class="option-grid"></div>
            </div>
            <div>
              <h4>1st-Level Spells</h4>
              <div id="spell-options" class="option-grid"></div>
            </div>
          </div>

          <label for="character-description" class="description-field">Background Tale
            <textarea id="character-description" rows="2" placeholder="A few words about your adventurer..."></textarea>
          </label>

          <div class="form-actions">
            <button type="submit">Save Hero</button>
            <p id="creation-status" class="status"></p>
          </div>
        </form>
      </section>

      <section class="selection-panel">
        <div class="selector">
          <label for="player-select">Select your hero</label>
          <select id="player-select"></select>
        </div>
        <div class="selector">
          <label for="monster-select">Select a monster</label>
          <select id="monster-select"></select>
        </div>
        <button id="start-game">Start Encounter</button>
        <p id="status-message" class="status"></p>
      </section>

      <p id="narrator-callout" class="narrator hidden">Choose your champions to begin the tale.</p>

      <section id="battlefield" class="hidden">
        <div class="combatants">
          <article class="card" id="player-card">
            <div class="card-header">
              <h2 class="card-title">Hero</h2>
              <span class="card-subtitle">Adventurer Sheet</span>
            </div>
            <div class="stats">
              <p><strong>Name:</strong> <span data-field="name"></span></p>
              <p><strong>Class:</strong> <span data-field="class"></span></p>
              <p><strong>HP:</strong> <span data-field="hp"></span></p>
              <p><strong>AC:</strong> <span data-field="ac"></span></p>
            </div>
            <div class="ability-scores" data-field="stats"></div>
            <p class="description" data-field="description"></p>
            <div class="actions">
              <h3>Battle Maneuvers</h3>
              <div id="player-actions" class="action-buttons"></div>
            </div>
          </article>

          <article class="card" id="monster-card">
            <div class="card-header">
              <h2 class="card-title">Monster</h2>
              <span class="card-subtitle">Dungeon Foe</span>
            </div>
            <div class="stats">
              <p><strong>Name:</strong> <span data-field="name"></span></p>
              <p><strong>HP:</strong> <span data-field="hp"></span></p>
              <p><strong>AC:</strong> <span data-field="ac"></span></p>
            </div>
            <div class="ability-scores" data-field="stats"></div>
            <p class="description" data-field="description"></p>
          </article>
        </div>

        <aside class="turn-info">
          <p><strong>Current Round:</strong> <span id="round-number">1</span></p>
          <p><strong>Active Combatant:</strong> <span id="active-turn">-</span></p>
        </aside>

        <section class="log">
          <h2>Combat Log</h2>
          <ul id="log-list"></ul>
        </section>
      </section>
    </main>

    <footer>
      <p>Forged with Flask, HTML, and CSS—yet the dice still heed the simulator's call.</p>
    </footer>

    <script src="{{ url_for('static', filename='app.js') }}" defer></script>
  </body>
</html>
