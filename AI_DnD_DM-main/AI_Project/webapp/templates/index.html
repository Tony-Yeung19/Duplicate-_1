<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>D&D Combat Arena</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
  </head>
  <body>
    <header>
      <div class="sigil" aria-hidden="true">⚔️</div>
      <h1>D&amp;D Combat Arena</h1>
      <p class="tagline">Summon a hero, confront a monster, and let the d20 decide destiny.</p>
    </header>

    <main>
      <section class="selection-panel">
        <div class="selector">
          <label for="player-select">Select your hero</label>
          <select id="player-select"></select>
        </div>
        <div class="selector">
          <label for="monster-select">Select a monster</label>
          <select id="monster-select"></select>
        </div>
        <button id="start-game">Start Encounter</button>
        <p id="status-message" class="status"></p>
      </section>

            <section class="creation-panel">
        <div class="creation-header">
          <h2>Forged Heroes</h2>
          <p>Create a new character using the same rules as the simulator.</p>
        </div>
        <form id="character-form">
          <div class="form-grid">
            <label class="form-field">
              <span>Name</span>
              <input id="creator-name" name="name" type="text" placeholder="E.g. Nyssa the Bold" required />
            </label>

            <label class="form-field">
              <span>Class</span>
              <select id="creator-class" name="class" required></select>
            </label>

            <label class="form-field">
              <span>Ability Method</span>
              <div class="ability-controls">
                <select id="ability-method" name="ability_method"></select>
                <button type="button" id="roll-abilities" class="secondary">Roll</button>
              </div>
            </label>

            <label class="form-field" id="pack-field">
              <span>Adventuring Pack</span>
              <select id="pack-select" name="pack"></select>
            </label>

            <label class="form-field">
              <span>Weapon</span>
              <select id="weapon-select" name="weapon"></select>
            </label>

            <label class="form-field">
              <span>Armor / Shield</span>
              <select id="armor-select" name="armor"></select>
            </label>
          </div>

          <fieldset id="ability-fieldset">
            <legend>Ability Scores</legend>
            <div class="ability-grid" id="ability-inputs"></div>
          </fieldset>

          <fieldset id="skill-fieldset">
            <legend>Skills</legend>
            <p id="skill-hint" class="hint"></p>
            <div id="skill-options" class="option-grid"></div>
          </fieldset>

          <fieldset id="spell-fieldset" class="hidden">
            <legend>Spells</legend>
            <div class="spell-group">
              <h3>Cantrips</h3>
              <p class="hint" id="cantrip-hint"></p>
              <div id="cantrip-options" class="option-grid"></div>
            </div>
            <div class="spell-group">
              <h3>Level 1 Spells</h3>
              <p class="hint" id="spell-hint"></p>
              <div id="spell-options" class="option-grid"></div>
            </div>
          </fieldset>

          <label class="form-field">
            <span>Character Bio (optional)</span>
            <textarea id="creator-description" name="description" rows="3" placeholder="Describe your hero's tale..."></textarea>
          </label>

          <div class="form-actions">
            <button type="submit" id="create-character">Save Character</button>
            <p id="creation-status" class="status"></p>
          </div>
        </form>
      </section>

      <p id="narrator-callout" class="narrator hidden">Choose your champions to begin the tale.</p>

      <section id="battlefield" class="hidden">
        <div class="combatants">
          <article class="card" id="player-card">
            <div class="card-header">
              <h2 class="card-title">Hero</h2>
              <span class="card-subtitle">Adventurer Sheet</span>
            </div>
            <div class="stats">
              <p><strong>Name:</strong> <span data-field="name"></span></p>
              <p><strong>Class:</strong> <span data-field="class"></span></p>
              <p><strong>HP:</strong> <span data-field="hp"></span></p>
              <p><strong>AC:</strong> <span data-field="ac"></span></p>
            </div>
            <div class="ability-scores" data-field="stats"></div>
            <p class="description" data-field="description"></p>
            <div class="actions">
              <h3>Battle Maneuvers</h3>
              <div id="player-actions" class="action-buttons"></div>
            </div>
          </article>

          <article class="card" id="monster-card">
            <div class="card-header">
              <h2 class="card-title">Monster</h2>
              <span class="card-subtitle">Dungeon Foe</span>
            </div>
            <div class="stats">
              <p><strong>Name:</strong> <span data-field="name"></span></p>
              <p><strong>HP:</strong> <span data-field="hp"></span></p>
              <p><strong>AC:</strong> <span data-field="ac"></span></p>
            </div>
            <div class="ability-scores" data-field="stats"></div>
            <p class="description" data-field="description"></p>
          </article>
        </div>

        <aside class="turn-info">
          <p><strong>Current Round:</strong> <span id="round-number">1</span></p>
          <p><strong>Active Combatant:</strong> <span id="active-turn">-</span></p>
        </aside>

        <section class="log">
          <h2>Combat Log</h2>
          <ul id="log-list"></ul>
        </section>
      </section>
    </main>

    <footer>
      <p>Forged with Flask, HTML, and CSS—yet the dice still heed the simulator's call.</p>
    </footer>

    <script src="{{ url_for('static', filename='app.js') }}" defer></script>
  </body>
</html>
